
tinymce.PluginManager.add('filemanager', function(editor) {

	function browserFile()
	{
		editor.focus(true);
        editor.windowManager.open({
			title: "Uploaded files",
			file: './?controller=system_filemanager&task=browser&filter_image=0',
			width: 880,
			height: 600
        });
    }

	editor.addButton('filemanager', {
		icon: 'browse',
		tooltip: 'Insert file',
		onclick: browserFile
	});

	editor.addMenuItem('filemanager', {
		icon: 'browse',
		text: 'Insert file',
		onclick: browserFile,
		context: 'insert',
		prependToContext: true
	});
});
